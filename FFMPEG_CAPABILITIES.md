# FFmpeg Capabilities –≤ smart-ffmpeg-android

## –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### ‚úÖ –ß—Ç–æ –µ—Å—Ç—å:

1. **–ü–æ–ª–Ω—ã–µ FFmpeg –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**
   - `libavformat.so` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —Ñ–æ—Ä–º–∞—Ç—ã
   - `libavcodec.so` - –∫–æ–¥–µ–∫–∏ (H.264, H.265, VP9, etc.)
   - `libavutil.so` - —É—Ç–∏–ª–∏—Ç—ã
   - `libswscale.so` - –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
   - `libswresample.so` - —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥ –∞—É–¥–∏–æ
   - `libavfilter.so` - —Ñ–∏–ª—å—Ç—Ä—ã
   - `libavdevice.so` - —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

2. **–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ FFmpeg API —á–µ—Ä–µ–∑ JNI**
   - –ù–µ—Ç overhead –Ω–∞ –∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–∞–º—è—Ç—å—é

3. **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
   - ‚úÖ `extractThumbnail()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–¥—Ä–æ–≤
   - ‚úÖ `getVideoDuration()` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - ‚úÖ `getVideoMetadata()` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
   - ‚úÖ `getFFmpegVersion()` - –≤–µ—Ä—Å–∏—è

### ‚ùå –ß–µ–≥–æ –Ω–µ—Ç:

1. **ffprobe CLI** - –Ω–µ –Ω—É–∂–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API –Ω–∞–ø—Ä—è–º—É—é
2. **ffmpeg CLI** - –Ω–µ –Ω—É–∂–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API –Ω–∞–ø—Ä—è–º—É—é
3. **JSON output** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å (—Å–º. JSON_METADATA_PROPOSAL.md)

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### –í–∞—à –ø–æ–¥—Ö–æ–¥ (API) vs CLI

| –ê—Å–ø–µ–∫—Ç   | API (–≤–∞—à)        | CLI (ffmpeg/ffprobe)          |
| -------- | ---------------- | ----------------------------- |
| –°–∫–æ—Ä–æ—Å—Ç—å | ‚ö° –ë—ã—Å—Ç—Ä–æ        | üêå –ú–µ–¥–ª–µ–Ω–Ω–æ (–∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞) |
| –ü–∞–º—è—Ç—å   | üíö –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ    | üíõ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏        |
| –ö–æ–Ω—Ç—Ä–æ–ª—å | ‚úÖ –ü–æ–ª–Ω—ã–π        | ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π               |
| –ü–∞—Ä—Å–∏–Ω–≥  | ‚úÖ –ù–∞—Ç–∏–≤–Ω—ã–µ —Ç–∏–ø—ã | ‚ùå –¢–µ–∫—Å—Ç ‚Üí –ø–∞—Ä—Å–∏–Ω–≥            |
| –û—à–∏–±–∫–∏   | ‚úÖ –ö–æ–¥—ã –≤–æ–∑–≤—Ä–∞—Ç–∞ | ‚ùå –ü–∞—Ä—Å–∏–Ω–≥ stderr             |
| –†–∞–∑–º–µ—Ä   | üíö ~50 MB        | üíõ ~50 MB + CLI               |

### –ü—Ä–∏–º–µ—Ä: –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

**–í–∞—à –ø–æ–¥—Ö–æ–¥ (API):**

```c
AVFormatContext *ctx;
avformat_open_input(&ctx, path, NULL, NULL);  // ~1ms
avformat_find_stream_info(ctx, NULL);         // ~10ms
int width = ctx->streams[0]->codecpar->width; // instant
```

**–í—Ä–µ–º—è:** ~11ms

**CLI –ø–æ–¥—Ö–æ–¥:**

```bash
ffprobe -v quiet -print_format json -show_format -show_streams video.mp4
```

**–í—Ä–µ–º—è:** ~50-100ms (–∑–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ + –ø–∞—Ä—Å–∏–Ω–≥ JSON)

---

## –ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å

### 1. JSON Output (–ª–µ–≥–∫–æ)

```kotlin
val json = SmartFfmpegBridge.getVideoMetadataJson(videoPath)
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π JSON –∫–∞–∫ ffprobe
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** 1-2 –¥–Ω—è  
**–ü–æ–ª—å–∑–∞:** –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å ffprobe, —É–¥–æ–±—Å—Ç–≤–æ –ø–∞—Ä—Å–∏–Ω–≥–∞

### 2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (—Å—Ä–µ–¥–Ω–µ)

```kotlin
data class ExtendedMetadata(
    val format: FormatInfo,
    val videoStreams: List<VideoStream>,
    val audioStreams: List<AudioStream>,
    val subtitleStreams: List<SubtitleStream>,
    val chapters: List<Chapter>,
    val metadata: Map<String, String>
)
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** 3-5 –¥–Ω–µ–π  
**–ü–æ–ª—å–∑–∞:** –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ

### 3. –§–∏–ª—å—Ç—Ä—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã (—Å–ª–æ–∂–Ω–æ)

```kotlin
SmartFfmpegBridge.applyFilter(
    inputPath = "video.mp4",
    outputPath = "filtered.mp4",
    filter = "brightness=0.2,contrast=1.5"
)
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** 1-2 –Ω–µ–¥–µ–ª–∏  
**–ü–æ–ª—å–∑–∞:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ –±–µ–∑ CLI

### 4. –¢—Ä–∞–Ω—Å–∫–æ–¥–∏–Ω–≥ (—Å–ª–æ–∂–Ω–æ)

```kotlin
SmartFfmpegBridge.transcode(
    inputPath = "video.avi",
    outputPath = "video.mp4",
    codec = "h264",
    bitrate = 3000000
)
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** 2-3 –Ω–µ–¥–µ–ª–∏  
**–ü–æ–ª—å–∑–∞:** –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á:

1. **Thumbnail extraction** ‚úÖ –£–∂–µ –µ—Å—Ç—å
2. **Video metadata** ‚úÖ –£–∂–µ –µ—Å—Ç—å
3. **Duration** ‚úÖ –£–∂–µ –µ—Å—Ç—å

### –î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

1. **–î–æ–±–∞–≤–∏—Ç—å JSON output** - –±—ã—Å—Ç—Ä–æ –∏ –ø–æ–ª–µ–∑–Ω–æ
2. **–†–∞—Å—à–∏—Ä–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** - –¥–æ–±–∞–≤–∏—Ç—å –∞—É–¥–∏–æ/—Å—É–±—Ç–∏—Ç—Ä—ã
3. **–î–æ–±–∞–≤–∏—Ç—å frame extraction** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–¥—Ä–æ–≤

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–∞—à–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –≤ 5-10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ CLI
2. **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ FFmpeg API
3. **–ü–∞–º—è—Ç—å** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
4. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –Ω–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–µ–∫—Å—Ç–∞
5. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏

---

## –í—ã–≤–æ–¥

–í–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è **–ª—É—á—à–µ** —á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CLI:

- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ
- ‚úÖ –ù–∞–¥–µ–∂–Ω–µ–µ
- ‚úÖ –ì–∏–±—á–µ

**ffprobe –Ω–µ –Ω—É–∂–µ–Ω** - —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Ç–µ–º –∂–µ —Ñ—É–Ω–∫—Ü–∏—è–º —á–µ—Ä–µ–∑ API!

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω JSON output - —ç—Ç–æ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å (—Å–º. JSON_METADATA_PROPOSAL.md).
